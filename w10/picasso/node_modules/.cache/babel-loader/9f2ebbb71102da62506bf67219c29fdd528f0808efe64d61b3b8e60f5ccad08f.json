{"ast":null,"code":"import { useCallback, useRef } from 'react';\nimport debounce from 'debounce';\nexport const mouseMoveDebounceTimeout = 250;\nexport const mouseMoveCloseTooltipDistance = 50;\nconst isMouseMovedTooFar = (positionA, positionB) => Math.abs(positionA.x - positionB.x) > mouseMoveCloseTooltipDistance || Math.abs(positionA.y - positionB.y) > mouseMoveCloseTooltipDistance;\nexport const useTooltipFollowCursor = _ref => {\n  let {\n    followCursor,\n    tooltipState\n  } = _ref;\n  const {\n    targetHoveredRef,\n    openTooltip,\n    closeTooltip\n  } = tooltipState;\n  const positionRef = useRef({\n    x: 0,\n    y: 0\n  });\n  const mouseMoveStartPositionRef = useRef(null);\n  const popperRef = useRef(null);\n  const handleMouseStop = useCallback(() => {\n    if (targetHoveredRef.current) {\n      mouseMoveStartPositionRef.current = null;\n      openTooltip();\n    }\n  }, [targetHoveredRef]);\n  const handleMouseStopDebounced = useCallback(debounce(handleMouseStop, mouseMoveDebounceTimeout), [debounce, handleMouseStop]);\n  const calculateTooltipPosition = event => {\n    var _a;\n    if (!mouseMoveStartPositionRef.current) {\n      mouseMoveStartPositionRef.current = {\n        x: event.clientX,\n        y: event.clientY\n      };\n    }\n    positionRef.current = {\n      x: event.clientX,\n      y: event.clientY\n    };\n    (_a = popperRef.current) === null || _a === void 0 ? void 0 : _a.scheduleUpdate();\n  };\n  const handleMouseMove = event => {\n    var _a;\n    calculateTooltipPosition(event);\n    const shouldCloseTooltip = isMouseMovedTooFar(positionRef.current, (_a = mouseMoveStartPositionRef === null || mouseMoveStartPositionRef === void 0 ? void 0 : mouseMoveStartPositionRef.current) !== null && _a !== void 0 ? _a : positionRef.current);\n    // When the cursor is moved `mouseMoveCloseTooltipDistance` pixels and more in any direction, we close the tooltip\n    // We need it because when the cursor is moved to a long distance, the tooltip becomes annoying\n    if (shouldCloseTooltip) {\n      closeTooltip();\n    }\n    handleMouseStopDebounced();\n  };\n  if (!followCursor) {\n    return undefined;\n  }\n  return {\n    handleMouseMove,\n    handleMouseOver: calculateTooltipPosition,\n    handleClick: calculateTooltipPosition,\n    followCursorPopperProps: {\n      popperRef,\n      modifiers: {\n        offset: {\n          enabled: true,\n          offset: '0px,10px'\n        }\n      },\n      anchorEl: {\n        clientHeight: 0,\n        clientWidth: 0,\n        getBoundingClientRect: () => ({\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0,\n          top: positionRef.current.y,\n          left: positionRef.current.x,\n          right: positionRef.current.x,\n          bottom: positionRef.current.y,\n          // this field required according to types\n          toJSON: () => {}\n        })\n      }\n    }\n  };\n};","map":{"version":3,"names":["useCallback","useRef","debounce","mouseMoveDebounceTimeout","mouseMoveCloseTooltipDistance","isMouseMovedTooFar","positionA","positionB","Math","abs","x","y","useTooltipFollowCursor","_ref","followCursor","tooltipState","targetHoveredRef","openTooltip","closeTooltip","positionRef","mouseMoveStartPositionRef","popperRef","handleMouseStop","current","handleMouseStopDebounced","calculateTooltipPosition","event","clientX","clientY","_a","scheduleUpdate","handleMouseMove","shouldCloseTooltip","undefined","handleMouseOver","handleClick","followCursorPopperProps","modifiers","offset","enabled","anchorEl","clientHeight","clientWidth","getBoundingClientRect","width","height","top","left","right","bottom","toJSON"],"sources":["../../src/Tooltip/useTooltipFollowCursor.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}