{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { useRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport cx from 'classnames';\nimport { useIsomorphicLayoutEffect } from '../utils';\nimport Menu from '../Menu';\nimport styles from './styles';\nconst useStyles = makeStyles(styles, {\n  name: 'PicassoScrollMenu'\n});\nconst getMenuSelectedNode = (menuRef, selectedIndex) => {\n  var _a;\n  return typeof selectedIndex === 'number' ? (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.children[selectedIndex] : undefined;\n};\nexport const scrollToSelection = (menuRef, selectedIndex) => {\n  const menuNode = menuRef.current;\n  const selectedNode = getMenuSelectedNode(menuRef, selectedIndex);\n  if (!menuNode || !selectedNode) {\n    return;\n  }\n  const menuRect = menuNode.getBoundingClientRect();\n  const selectedRect = selectedNode.getBoundingClientRect();\n  if (selectedRect.top < menuRect.top) {\n    menuNode.scrollTop -= menuRect.top - selectedRect.top;\n  } else if (selectedRect.bottom > menuRect.bottom) {\n    menuNode.scrollTop += selectedRect.bottom - menuRect.bottom;\n  }\n};\nconst preventClick = e => {\n  // ScrollMenu is used in dropdowns.\n  // When clicking on the scrollView, the dropdown should not close.\n  e.preventDefault();\n};\nconst ScrollMenu = props => {\n  const {\n      selectedIndex,\n      onBlur,\n      children,\n      style,\n      fixedHeader,\n      fixedFooter,\n      className,\n      role,\n      testIds,\n      'data-testid': dataTestId\n    } = props,\n    rest = __rest(props, [\"selectedIndex\", \"onBlur\", \"children\", \"style\", \"fixedHeader\", \"fixedFooter\", \"className\", \"role\", \"testIds\", 'data-testid']);\n  const classes = useStyles();\n  const menuRef = useRef(null);\n  useIsomorphicLayoutEffect(() => scrollToSelection(menuRef, selectedIndex), [selectedIndex]);\n  return React.createElement(Menu, Object.assign({\n    className: cx(classes.menu, className),\n    style: style,\n    role: role,\n    \"data-testid\": dataTestId || (testIds === null || testIds === void 0 ? void 0 : testIds.root)\n  }, rest), fixedHeader, React.createElement(\"div\", {\n    onMouseDown: preventClick\n  }, React.createElement(\"div\", {\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.list,\n    ref: menuRef,\n    className: classes.scrollView,\n    onBlur: onBlur\n  }, children), fixedFooter));\n};\nScrollMenu.defaultProps = {\n  role: 'menu'\n};\nScrollMenu.displayName = 'ScrollMenu';\nexport default ScrollMenu;","map":{"version":3,"names":["React","useRef","makeStyles","cx","useIsomorphicLayoutEffect","Menu","styles","useStyles","name","getMenuSelectedNode","menuRef","selectedIndex","_a","current","children","undefined","scrollToSelection","menuNode","selectedNode","menuRect","getBoundingClientRect","selectedRect","top","scrollTop","bottom","preventClick","e","preventDefault","ScrollMenu","props","onBlur","style","fixedHeader","fixedFooter","className","role","testIds","dataTestId","rest","__rest","classes","createElement","Object","assign","menu","root","onMouseDown","list","ref","scrollView","defaultProps","displayName"],"sources":["../../src/ScrollMenu/ScrollMenu.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}