{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { forwardRef, useContext } from 'react';\nimport cx from 'classnames';\nimport { Popper as MUIPopper } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useIsomorphicLayoutEffect } from '@toptal/picasso-shared';\nimport { usePicassoRoot, useBreakpoint } from '@toptal/picasso-provider';\nimport ModalContext from '../Modal/ModalContext';\nimport useWidthOf from '../utils/use-width-of';\nimport styles from './styles';\nconst useStyles = makeStyles(styles, {\n  name: 'PicassoPopper'\n});\nconst getAnchorEl = anchorEl => typeof anchorEl === 'function' ? anchorEl() : anchorEl;\nconst getPreventOverflowOptions = isInsideModal => {\n  if (isInsideModal) {\n    return {\n      boundariesElement: 'scrollParent',\n      padding: 0\n    };\n  }\n  return {\n    boundariesElement: 'viewport',\n    padding: 5\n  };\n};\nexport const getPopperOptions = function (popperOptions) {\n  let isInsideModal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var _a, _b;\n  return Object.assign(Object.assign({}, popperOptions), {\n    modifiers: Object.assign(Object.assign({}, popperOptions.modifiers), {\n      flip: Object.assign({\n        enabled: true\n      }, (_a = popperOptions.modifiers) === null || _a === void 0 ? void 0 : _a.flip),\n      preventOverflow: Object.assign(Object.assign({\n        enabled: true\n      }, getPreventOverflowOptions(isInsideModal)), (_b = popperOptions.modifiers) === null || _b === void 0 ? void 0 : _b.preventOverflow)\n    })\n  });\n};\nconst useWidthStyle = _ref => {\n  let {\n    anchorEl,\n    autoWidth,\n    width\n  } = _ref;\n  const resolvedAnchorEl = getAnchorEl(anchorEl);\n  const anchorElWidth = useWidthOf(resolvedAnchorEl);\n  if (width) {\n    return {\n      width\n    };\n  }\n  if (autoWidth) {\n    return {\n      width: anchorElWidth\n    };\n  }\n  return {};\n};\nexport const Popper = forwardRef(function Popper(props, ref) {\n  const {\n      children,\n      open,\n      anchorEl,\n      className,\n      container,\n      popperOptions = {},\n      keepMounted,\n      autoWidth,\n      width,\n      enableCompactMode,\n      disablePortal,\n      style\n    } = props,\n    rest = __rest(props, [\"children\", \"open\", \"anchorEl\", \"className\", \"container\", \"popperOptions\", \"keepMounted\", \"autoWidth\", \"width\", \"enableCompactMode\", \"disablePortal\", \"style\"]);\n  const picassoRootContainer = usePicassoRoot();\n  const isInsideModal = useContext(ModalContext);\n  const classes = useStyles();\n  const isCompactLayoutResolution = useBreakpoint(['small', 'medium']);\n  const isCompactLayout = enableCompactMode && isCompactLayoutResolution;\n  const widthStyle = useWidthStyle({\n    autoWidth,\n    width,\n    anchorEl\n  });\n  const anchorElWidthStyle = !isCompactLayout && widthStyle;\n  useIsomorphicLayoutEffect(() => {\n    if (isCompactLayout && open && document.body.style.overflow !== 'hidden') {\n      const prev = document.body.style.overflow;\n      document.body.style.overflow = 'hidden';\n      return () => {\n        document.body.style.overflow = prev;\n      };\n    }\n  }, [isCompactLayout, open]);\n  const memoizedPopperOptions = React.useMemo(() => getPopperOptions(popperOptions, isInsideModal), [popperOptions, isInsideModal]);\n  return React.createElement(MUIPopper, Object.assign({\n    open: open,\n    container: container || picassoRootContainer,\n    anchorEl: anchorEl,\n    className: cx(classes.root, className),\n    popperRef: ref,\n    popperOptions: memoizedPopperOptions,\n    disablePortal: disablePortal,\n    keepMounted: keepMounted,\n    style: Object.assign(Object.assign({}, style), anchorElWidthStyle)\n  }, rest), children);\n});\nPopper.defaultProps = {\n  open: false,\n  disablePortal: false,\n  placement: 'bottom',\n  popperOptions: {},\n  autoWidth: true\n};\nPopper.displayName = 'Popper';\nexport default Popper;","map":{"version":3,"names":["React","forwardRef","useContext","cx","Popper","MUIPopper","makeStyles","useIsomorphicLayoutEffect","usePicassoRoot","useBreakpoint","ModalContext","useWidthOf","styles","useStyles","name","getAnchorEl","anchorEl","getPreventOverflowOptions","isInsideModal","boundariesElement","padding","getPopperOptions","popperOptions","arguments","length","undefined","Object","assign","modifiers","flip","enabled","_a","preventOverflow","_b","useWidthStyle","_ref","autoWidth","width","resolvedAnchorEl","anchorElWidth","props","ref","children","open","className","container","keepMounted","enableCompactMode","disablePortal","style","rest","__rest","picassoRootContainer","classes","isCompactLayoutResolution","isCompactLayout","widthStyle","anchorElWidthStyle","document","body","overflow","prev","memoizedPopperOptions","useMemo","createElement","root","popperRef","defaultProps","placement","displayName"],"sources":["../../src/Popper/Popper.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}