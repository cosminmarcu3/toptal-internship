{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport React, { useEffect } from 'react';\n// we could use Page.Head instead, but it required PicassoProvider to be initialized\n// so it led to cross dependencies and error\nimport { Helmet } from 'react-helmet-async';\nimport useSafeState from '@toptal/picasso/utils/use-safe-state';\nimport unsafeErrorLog from '@toptal/picasso/utils/unsafe-error-log';\nimport { getIcons } from './icons';\nimport { useAppConfig } from '../Picasso/RootContext';\nexport const Favicon = _ref => {\n  let {\n    environment\n  } = _ref;\n  const [icons, setIcons] = useSafeState({});\n  const {\n    environment: configEnvironment\n  } = useAppConfig();\n  const resolvedEnvironment = environment || configEnvironment;\n  useEffect(() => {\n    if (resolvedEnvironment === 'test') {\n      return;\n    }\n    const loadIcons = () => __awaiter(void 0, void 0, void 0, function* () {\n      try {\n        const loadedIcons = yield getIcons(resolvedEnvironment);\n        setIcons(loadedIcons);\n      } catch (_a) {\n        unsafeErrorLog('favicons were not loaded properly for environment' + resolvedEnvironment);\n      }\n    });\n    loadIcons();\n  }, [resolvedEnvironment, setIcons]);\n  if (resolvedEnvironment === 'test') {\n    // do not load favicons in tests (e.g. in e2e)\n    return null;\n  }\n  const {\n    icon16,\n    icon32,\n    icon180\n  } = icons;\n  // favicon.ico will be loaded automatically by browser from \"public\" folder\n  // if it exists there. It's needed only for old browsers\n  // we don't have to specify it in the head\n  return React.createElement(Helmet, null, React.createElement(\"link\", {\n    rel: 'apple-touch-icon',\n    sizes: '180x180',\n    href: icon180\n  }), React.createElement(\"link\", {\n    rel: 'icon',\n    type: 'image/png',\n    sizes: '32x32',\n    href: icon32\n  }), React.createElement(\"link\", {\n    rel: 'icon',\n    type: 'image/png',\n    sizes: '16x16',\n    href: icon16\n  }));\n};\nFavicon.defaultProps = {};\nFavicon.displayName = 'Favicon';\nexport default Favicon;","map":{"version":3,"names":["React","useEffect","Helmet","useSafeState","unsafeErrorLog","getIcons","useAppConfig","Favicon","_ref","environment","icons","setIcons","configEnvironment","resolvedEnvironment","loadIcons","__awaiter","loadedIcons","_a","icon16","icon32","icon180","createElement","rel","sizes","href","type","defaultProps","displayName"],"sources":["../../src/Favicon/Favicon.tsx"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC;AACA;AACA,SAASC,MAAM,QAAQ,oBAAoB;AAC3C,OAAOC,YAAY,MAAM,sCAAsC;AAC/D,OAAOC,cAAc,MAAM,wCAAwC;AAEnE,SAASC,QAAQ,QAAQ,SAAS;AAElC,SAASC,YAAY,QAAQ,wBAAwB;AAOrD,OAAO,MAAMC,OAAO,GAAGC,IAAA,IAA2B;EAAA,IAA1B;IAAEC;EAAW,CAAS,GAAAD,IAAA;EAC5C,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,GAAGR,YAAY,CAInC,EAAE,CAAC;EAEN,MAAM;IAAEM,WAAW,EAAEG;EAAiB,CAAE,GAAGN,YAAY,EAAE;EAEzD,MAAMO,mBAAmB,GAAGJ,WAAW,IAAIG,iBAAiB;EAE5DX,SAAS,CAAC,MAAK;IACb,IAAIY,mBAAmB,KAAK,MAAM,EAAE;MAClC;;IAGF,MAAMC,SAAS,GAAGA,CAAA,KAAWC,SAAA;MAC3B,IAAI;QACF,MAAMC,WAAW,GAAG,MAAMX,QAAQ,CAChCQ,mBAAsC,CACvC;QAEDF,QAAQ,CAACK,WAAW,CAAC;OACtB,CAAC,OAAAC,EAAA,EAAM;QACNb,cAAc,CACZ,mDAAmD,GACjDS,mBAAmB,CACtB;;IAEL,CAAC;IAEDC,SAAS,EAAE;EACb,CAAC,EAAE,CAACD,mBAAmB,EAAEF,QAAQ,CAAC,CAAC;EAEnC,IAAIE,mBAAmB,KAAK,MAAM,EAAE;IAClC;IACA,OAAO,IAAI;;EAGb,MAAM;IAAEK,MAAM;IAAEC,MAAM;IAAEC;EAAO,CAAE,GAAGV,KAAK;EAEzC;EACA;EACA;EACA,OACEV,KAAA,CAAAqB,aAAA,CAACnB,MAAM,QACLF,KAAA,CAAAqB,aAAA;IAAMC,GAAG,EAAC,kBAAkB;IAACC,KAAK,EAAC,SAAS;IAACC,IAAI,EAAEJ;EAAO,EAAI,EAC9DpB,KAAA,CAAAqB,aAAA;IAAMC,GAAG,EAAC,MAAM;IAACG,IAAI,EAAC,WAAW;IAACF,KAAK,EAAC,OAAO;IAACC,IAAI,EAAEL;EAAM,EAAI,EAChEnB,KAAA,CAAAqB,aAAA;IAAMC,GAAG,EAAC,MAAM;IAACG,IAAI,EAAC,WAAW;IAACF,KAAK,EAAC,OAAO;IAACC,IAAI,EAAEN;EAAM,EAAI,CACzD;AAEb,CAAC;AAEDX,OAAO,CAACmB,YAAY,GAAG,EAAE;AAEzBnB,OAAO,CAACoB,WAAW,GAAG,SAAS;AAE/B,eAAepB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}