{"ast":null,"code":"import { capitalize, makeStyles } from '@material-ui/core';\nimport cx from 'classnames';\nimport React, { forwardRef, useImperativeHandle } from 'react';\nimport Avatar from '../Avatar';\nimport AvatarDropzoneSvg from '../AvatarDropzoneSvg';\nimport { Upload16, Upload24 } from '../Icon';\nimport Loader from '../Loader';\nimport styles from './styles';\nimport useAvatarUpload from './hooks/use-avatar-upload';\nimport useAvatarStates from './hooks/use-avatar-states';\nconst useStyles = makeStyles(styles, {\n  name: 'PicassoAvatarUpload'\n});\nexport const AvatarUpload = forwardRef(function AvatarUpload(props, ref) {\n  const {\n    autoFocus,\n    autoHover,\n    defaultActive,\n    uploading = false,\n    size = 'small',\n    onEdit,\n    onFocus,\n    onBlur,\n    status,\n    'data-testid': dataTestId,\n    testIds,\n    src,\n    alt,\n    style,\n    avatarStyle,\n    // dropzoneOptions\n    accept,\n    minSize,\n    maxSize,\n    disabled,\n    onDrop,\n    onDropAccepted,\n    onDropRejected,\n    validator\n  } = props;\n  const classes = useStyles();\n  const {\n    rootRef,\n    showUploadIcon,\n    showAvatar,\n    isDropzoneDragActive,\n    isDropzoneFocused,\n    getInputProps,\n    getRootProps,\n    handleEdit\n  } = useAvatarUpload({\n    accept,\n    minSize,\n    maxSize,\n    disabled,\n    uploading,\n    src,\n    validator,\n    onDrop,\n    onEdit,\n    onDropAccepted,\n    onDropRejected\n  });\n  const {\n    hovered,\n    onMouseEnter,\n    onMouseLeave,\n    isDragActive,\n    isFocused\n  } = useAvatarStates({\n    autoHover,\n    autoFocus,\n    defaultActive,\n    isDropzoneFocused,\n    isDropzoneDragActive\n  });\n  const loadingIcon = uploading && React.createElement(Loader, {\n    className: cx(classes.icon, {\n      [classes.hovered]: hovered,\n      [classes.error]: status === 'error'\n    }),\n    size: 'small',\n    variant: 'inherit',\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.loader\n  });\n  const UploadIconComponent = size === 'xxsmall' || size === 'xsmall' ? Upload16 : Upload24;\n  const uploadIcon = showUploadIcon && React.createElement(UploadIconComponent, {\n    className: cx(classes.icon, {\n      [classes.hovered]: hovered,\n      [classes.error]: status === 'error'\n    }),\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.uploadIcon\n  });\n  // exposing the rootRef from react-dropzone to the parent component\n  useImperativeHandle(ref, () => {\n    var _a;\n    return (_a = rootRef.current) !== null && _a !== void 0 ? _a : {};\n  }, [rootRef]);\n  return React.createElement(\"div\", Object.assign({\n    style: style\n  }, getRootProps({\n    className: cx(classes.root, classes[`size${capitalize(size)}`], {\n      [classes.disabled]: disabled,\n      [classes.readonlyAvatar]: showAvatar\n    }),\n    'data-testid': dataTestId,\n    onMouseEnter,\n    onMouseLeave,\n    onFocus,\n    onBlur\n  })), React.createElement(\"input\", Object.assign({}, getInputProps())), showAvatar ? React.createElement(Avatar, {\n    style: avatarStyle,\n    size: size,\n    onEdit: onEdit ? handleEdit : undefined,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    src: src,\n    alt: alt,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.avatar,\n    variant: 'square'\n  }) : React.createElement(React.Fragment, null, React.createElement(AvatarDropzoneSvg, {\n    disabled: disabled,\n    error: status === 'error',\n    size: size,\n    hovered: hovered,\n    focused: isFocused,\n    isDragActive: isDragActive,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.dropzoneSvg\n  }), loadingIcon, uploadIcon));\n});\nAvatarUpload.displayName = 'AvatarUpload';\nAvatarUpload.defaultProps = {\n  size: 'small',\n  disabled: false,\n  uploading: false,\n  maxSize: 104857600,\n  minSize: 0,\n  accept: 'image/*'\n};\nexport default AvatarUpload;","map":{"version":3,"names":["capitalize","makeStyles","cx","React","forwardRef","useImperativeHandle","Avatar","AvatarDropzoneSvg","Upload16","Upload24","Loader","styles","useAvatarUpload","useAvatarStates","useStyles","name","AvatarUpload","props","ref","autoFocus","autoHover","defaultActive","uploading","size","onEdit","onFocus","onBlur","status","dataTestId","testIds","src","alt","style","avatarStyle","accept","minSize","maxSize","disabled","onDrop","onDropAccepted","onDropRejected","validator","classes","rootRef","showUploadIcon","showAvatar","isDropzoneDragActive","isDropzoneFocused","getInputProps","getRootProps","handleEdit","hovered","onMouseEnter","onMouseLeave","isDragActive","isFocused","loadingIcon","createElement","className","icon","error","variant","loader","UploadIconComponent","uploadIcon","_a","current","Object","assign","root","readonlyAvatar","undefined","avatar","Fragment","focused","dropzoneSvg","displayName","defaultProps"],"sources":["../../src/AvatarUpload/AvatarUpload.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}