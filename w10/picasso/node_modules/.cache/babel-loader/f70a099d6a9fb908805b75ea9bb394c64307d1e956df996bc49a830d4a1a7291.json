{"ast":null,"code":"import { makeStyles } from '@material-ui/core/styles';\nimport { useSidebar } from '@toptal/picasso-provider';\nimport cx from 'classnames';\nimport React, { forwardRef, useCallback, useEffect, useState } from 'react';\nimport ButtonCircular from '../ButtonCircular';\nimport Container from '../Container';\nimport { BackMinor16, ChevronRight16 } from '../Icon';\nimport { PageHamburgerPortal, usePortalToHamburger } from '../PageHamburger';\nimport SidebarItem from '../SidebarItem';\nimport SidebarLogo from '../SidebarLogo';\nimport SidebarMenu from '../SidebarMenu';\nimport { noop, useBreakpoint } from '../utils';\nimport { SidebarContextProvider } from './SidebarContextProvider';\nimport styles from './styles';\nconst useStyles = makeStyles(styles, {\n  name: 'PageSidebar'\n});\nexport const PageSidebar = forwardRef(function Sidebar(props, ref) {\n  const {\n    children,\n    variant = 'light',\n    className,\n    style,\n    collapsible,\n    defaultCollapsed,\n    testIds,\n    size = 'medium',\n    wrapperMaxHeight,\n    disableSticky,\n    onCollapse\n  } = props;\n  const classes = useStyles();\n  const {\n    setHasSidebar\n  } = useSidebar();\n  const [isCollapsed, setIsCollapsed] = useState(!!defaultCollapsed);\n  const [isHovered, setIsHovered] = useState(false);\n  const [expandedItemKey, setExpandedItemKey] = useState(null);\n  useEffect(() => {\n    // Clear expanded submenu on sidebar collapse\n    if (isCollapsed) {\n      setExpandedItemKey(null);\n    }\n  }, [isCollapsed]);\n  useEffect(() => {\n    setHasSidebar(true);\n    return function cleanup() {\n      setHasSidebar(false);\n    };\n  }, [setHasSidebar]);\n  usePortalToHamburger();\n  const isCompactLayout = useBreakpoint(['small', 'medium']);\n  const handleCollapseButtonClick = useCallback(() => {\n    setIsCollapsed(previousState => !previousState);\n    onCollapse === null || onCollapse === void 0 ? void 0 : onCollapse();\n  }, [setIsCollapsed]);\n  const sidebar = React.createElement(Container, {\n    ref: ref,\n    flex: true,\n    direction: 'column',\n    style: style,\n    className: cx(classes.root, className, classes[variant], classes[size], {\n      [classes.rootCollapsed]: collapsible && isCollapsed\n    }),\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.container,\n    onMouseEnter: collapsible ? () => setIsHovered(true) : noop,\n    onMouseLeave: collapsible ? () => setIsHovered(false) : noop\n  }, React.createElement(\"div\", {\n    style: {\n      maxHeight: wrapperMaxHeight\n    },\n    className: cx(classes.wrapper, {\n      [classes.sticky]: !disableSticky\n    })\n  }, React.createElement(Container, {\n    flex: true,\n    direction: 'column',\n    className: classes.scrollableContent,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.scrollableContainer\n  }, collapsible && React.createElement(ButtonCircular, {\n    className: cx(classes.collapseButton, {\n      [classes.buttonVisible]: isHovered\n    }),\n    onClick: handleCollapseButtonClick,\n    icon: isCollapsed ? React.createElement(ChevronRight16, null) : React.createElement(BackMinor16, null),\n    \"aria-label\": 'collapse sidebar',\n    variant: 'primary',\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.collapseButton\n  }), React.createElement(\"div\", {\n    className: classes.spacer\n  }), React.createElement(SidebarContextProvider, {\n    isCollapsed: isCollapsed,\n    isHovered: isHovered,\n    variant: variant,\n    expandedItemKey: expandedItemKey,\n    setExpandedItemKey: setExpandedItemKey\n  }, children))));\n  return isCompactLayout ? React.createElement(PageHamburgerPortal, null, children) : sidebar;\n});\nPageSidebar.defaultProps = {\n  variant: 'light',\n  size: 'medium'\n};\nPageSidebar.displayName = 'PageSidebar';\nexport default Object.assign(PageSidebar, {\n  Menu: SidebarMenu,\n  Item: SidebarItem,\n  Logo: SidebarLogo\n});","map":{"version":3,"names":["makeStyles","useSidebar","cx","React","forwardRef","useCallback","useEffect","useState","ButtonCircular","Container","BackMinor16","ChevronRight16","PageHamburgerPortal","usePortalToHamburger","SidebarItem","SidebarLogo","SidebarMenu","noop","useBreakpoint","SidebarContextProvider","styles","useStyles","name","PageSidebar","Sidebar","props","ref","children","variant","className","style","collapsible","defaultCollapsed","testIds","size","wrapperMaxHeight","disableSticky","onCollapse","classes","setHasSidebar","isCollapsed","setIsCollapsed","isHovered","setIsHovered","expandedItemKey","setExpandedItemKey","cleanup","isCompactLayout","handleCollapseButtonClick","previousState","sidebar","createElement","flex","direction","root","rootCollapsed","container","onMouseEnter","onMouseLeave","maxHeight","wrapper","sticky","scrollableContent","scrollableContainer","collapseButton","buttonVisible","onClick","icon","spacer","defaultProps","displayName","Object","assign","Menu","Item","Logo"],"sources":["../../src/PageSidebar/PageSidebar.tsx"],"sourcesContent":[null],"mappings":"AAAA,SAASA,UAAU,QAAe,0BAA0B;AAC5D,SAASC,UAAU,QAAQ,0BAA0B;AAErD,OAAOC,EAAE,MAAM,YAAY;AAC3B,OAAOC,KAAK,IACVC,UAAU,EAEVC,WAAW,EACXC,SAAS,EACTC,QAAQ,QAEH,OAAO;AAEd,OAAOC,cAAc,MAAM,mBAAmB;AAC9C,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,WAAW,EAAEC,cAAc,QAAQ,SAAS;AACrD,SAASC,mBAAmB,EAAEC,oBAAoB,QAAQ,kBAAkB;AAC5E,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,WAAW,MAAM,gBAAgB;AACxC,OAAOC,WAAW,MAAM,gBAAgB;AACxC,SAASC,IAAI,EAAEC,aAAa,QAAQ,UAAU;AAC9C,SAASC,sBAAsB,QAAQ,0BAA0B;AACjE,OAAOC,MAAM,MAAM,UAAU;AA2B7B,MAAMC,SAAS,GAAGrB,UAAU,CAAQoB,MAAM,EAAE;EAC1CE,IAAI,EAAE;CACP,CAAC;AAEF,OAAO,MAAMC,WAAW,GAAGnB,UAAU,CAAwB,SAASoB,OAAOA,CAC3EC,KAAK,EACLC,GAAG;EAEH,MAAM;IACJC,QAAQ;IACRC,OAAO,GAAG,OAAO;IACjBC,SAAS;IACTC,KAAK;IACLC,WAAW;IACXC,gBAAgB;IAChBC,OAAO;IACPC,IAAI,GAAG,QAAQ;IACfC,gBAAgB;IAChBC,aAAa;IACbC;EAAU,CACX,GAAGZ,KAAK;EACT,MAAMa,OAAO,GAAGjB,SAAS,EAAE;EAC3B,MAAM;IAAEkB;EAAa,CAAE,GAAGtC,UAAU,EAAE;EACtC,MAAM,CAACuC,WAAW,EAAEC,cAAc,CAAC,GAAGlC,QAAQ,CAAC,CAAC,CAACyB,gBAAgB,CAAC;EAClE,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqC,eAAe,EAAEC,kBAAkB,CAAC,GAAGtC,QAAQ,CAAgB,IAAI,CAAC;EAE3ED,SAAS,CAAC,MAAK;IACb;IACA,IAAIkC,WAAW,EAAE;MACfK,kBAAkB,CAAC,IAAI,CAAC;;EAE5B,CAAC,EAAE,CAACL,WAAW,CAAC,CAAC;EAEjBlC,SAAS,CAAC,MAAK;IACbiC,aAAa,CAAC,IAAI,CAAC;IAEnB,OAAO,SAASO,OAAOA,CAAA;MACrBP,aAAa,CAAC,KAAK,CAAC;IACtB,CAAC;EACH,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB1B,oBAAoB,EAAE;EAEtB,MAAMkC,eAAe,GAAG7B,aAAa,CAAC,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;EAE1D,MAAM8B,yBAAyB,GAAG3C,WAAW,CAAC,MAAK;IACjDoC,cAAc,CAACQ,aAAa,IAAI,CAACA,aAAa,CAAC;IAC/CZ,UAAU,aAAVA,UAAU,uBAAVA,UAAU,EAAI;EAChB,CAAC,EAAE,CAACI,cAAc,CAAC,CAAC;EAEpB,MAAMS,OAAO,GACX/C,KAAA,CAAAgD,aAAA,CAAC1C,SAAS;IACRiB,GAAG,EAAEA,GAAG;IACR0B,IAAI;IACJC,SAAS,EAAC,QAAQ;IAClBvB,KAAK,EAAEA,KAAK;IACZD,SAAS,EAAE3B,EAAE,CAACoC,OAAO,CAACgB,IAAI,EAAEzB,SAAS,EAAES,OAAO,CAACV,OAAO,CAAC,EAAEU,OAAO,CAACJ,IAAI,CAAC,EAAE;MACtE,CAACI,OAAO,CAACiB,aAAa,GAAGxB,WAAW,IAAIS;KACzC,CAAC;IAAA,eACWP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEuB,SAAS;IAC/BC,YAAY,EAAE1B,WAAW,GAAG,MAAMY,YAAY,CAAC,IAAI,CAAC,GAAG1B,IAAI;IAC3DyC,YAAY,EAAE3B,WAAW,GAAG,MAAMY,YAAY,CAAC,KAAK,CAAC,GAAG1B;EAAI,GAE5Dd,KAAA,CAAAgD,aAAA;IACErB,KAAK,EAAE;MACL6B,SAAS,EAAExB;KACZ;IACDN,SAAS,EAAE3B,EAAE,CAACoC,OAAO,CAACsB,OAAO,EAAE;MAC7B,CAACtB,OAAO,CAACuB,MAAM,GAAG,CAACzB;KACpB;EAAC,GAEFjC,KAAA,CAAAgD,aAAA,CAAC1C,SAAS;IACR2C,IAAI;IACJC,SAAS,EAAC,QAAQ;IAClBxB,SAAS,EAAES,OAAO,CAACwB,iBAAiB;IAAA,eACvB7B,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE8B;EAAmB,GAExChC,WAAW,IACV5B,KAAA,CAAAgD,aAAA,CAAC3C,cAAc;IACbqB,SAAS,EAAE3B,EAAE,CAACoC,OAAO,CAAC0B,cAAc,EAAE;MACpC,CAAC1B,OAAO,CAAC2B,aAAa,GAAGvB;KAC1B,CAAC;IACFwB,OAAO,EAAElB,yBAAyB;IAClCmB,IAAI,EAAE3B,WAAW,GAAGrC,KAAA,CAAAgD,aAAA,CAACxC,cAAc,OAAG,GAAGR,KAAA,CAAAgD,aAAA,CAACzC,WAAW,OAAG;IAAA,cAC7C,kBAAkB;IAC7BkB,OAAO,EAAC,SAAS;IAAA,eACJK,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE+B;EAAc,EAEvC,EACD7D,KAAA,CAAAgD,aAAA;IAAKtB,SAAS,EAAES,OAAO,CAAC8B;EAAM,EAAI,EAClCjE,KAAA,CAAAgD,aAAA,CAAChC,sBAAsB;IACrBqB,WAAW,EAAEA,WAAW;IACxBE,SAAS,EAAEA,SAAS;IACpBd,OAAO,EAAEA,OAAO;IAChBgB,eAAe,EAAEA,eAAe;IAChCC,kBAAkB,EAAEA;EAAkB,GAErClB,QAAQ,CACc,CACf,CACR,CAET;EAED,OAAOoB,eAAe,GACpB5C,KAAA,CAAAgD,aAAA,CAACvC,mBAAmB,QAAEe,QAAQ,CAAuB,GAErDuB,OACD;AACH,CAAC,CAAC;AAEF3B,WAAW,CAAC8C,YAAY,GAAG;EACzBzC,OAAO,EAAE,OAAO;EAChBM,IAAI,EAAE;CACP;AAEDX,WAAW,CAAC+C,WAAW,GAAG,aAAa;AAEvC,eAAeC,MAAM,CAACC,MAAM,CAACjD,WAAW,EAAE;EACxCkD,IAAI,EAAEzD,WAAW;EACjB0D,IAAI,EAAE5D,WAAW;EACjB6D,IAAI,EAAE5D;CACP,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}