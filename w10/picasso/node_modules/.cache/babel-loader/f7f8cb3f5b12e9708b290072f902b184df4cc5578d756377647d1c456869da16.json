{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { forwardRef, Fragment } from 'react';\nimport Autocomplete from '../Autocomplete';\nimport TagSelectorInput from '../TagSelectorInput';\nimport TagSelectorLabel from '../TagSelectorLabel';\nimport unsafeErrorLog from '../utils/unsafe-error-log';\nimport noop from '../utils/noop';\nimport { usePropDeprecationWarning } from '../utils/use-deprecation-warnings';\nconst EMPTY_INPUT_VALUE = '';\nexport const filterOutSelectedOptions = function (options, values) {\n  let getKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : item => item.value;\n  if (!options) {\n    return null;\n  }\n  const valuesKeySet = values.reduce((acc, item) => acc.add(getKey(item)), new Set());\n  return options.filter(option => !valuesKeySet.has(getKey(option)));\n};\nconst getItemText = item => item && item.text || EMPTY_INPUT_VALUE;\nexport const TagSelector = forwardRef(function TagSelector(props, ref) {\n  const {\n      disabled,\n      enableAutofill,\n      getDisplayValue = getItemText,\n      getKey: customGetKey,\n      inputValue = '',\n      loading,\n      noOptionsText,\n      onBlur,\n      onChange = noop,\n      onFocus,\n      onInputChange = noop,\n      onOtherOptionSelect = noop,\n      options = [],\n      otherOptionLabel,\n      placeholder,\n      renderLabel: customRenderLabel,\n      renderOption,\n      showOtherOption,\n      value: values = [],\n      width,\n      popperContainer,\n      popperOptions,\n      error,\n      status,\n      testIds\n    } = props,\n    rest = __rest(props, [\"disabled\", \"enableAutofill\", \"getDisplayValue\", \"getKey\", \"inputValue\", \"loading\", \"noOptionsText\", \"onBlur\", \"onChange\", \"onFocus\", \"onInputChange\", \"onOtherOptionSelect\", \"options\", \"otherOptionLabel\", \"placeholder\", \"renderLabel\", \"renderOption\", \"showOtherOption\", \"value\", \"width\", \"popperContainer\", \"popperOptions\", \"error\", \"status\", \"testIds\"]);\n  usePropDeprecationWarning({\n    props,\n    name: 'error',\n    componentName: 'TagSelector',\n    description: 'Use the `status` prop instead. `error` is deprecated and will be removed in the next major release.'\n  });\n  const handleDelete = value => {\n    if (disabled) {\n      return;\n    }\n    const index = values.indexOf(value);\n    onChange([...values.slice(0, index), ...values.slice(index + 1)]);\n  };\n  const handleKeyDown = (event, newInputValue) => {\n    const hasSelection = values.length;\n    const isDeleting = event.key === 'Backspace';\n    if (hasSelection && !newInputValue && isDeleting) {\n      handleDelete(values[values.length - 1]);\n    }\n  };\n  const handleSelect = autocompleteItem => {\n    const item = autocompleteItem;\n    onChange([...values, item]);\n    onInputChange('');\n  };\n  const handleOtherOptionSelect = value => {\n    onInputChange('');\n    onOtherOptionSelect(value);\n  };\n  const getKey = item => {\n    if (customGetKey) {\n      return customGetKey(item);\n    }\n    if (item.value !== undefined) {\n      return item.value;\n    }\n    unsafeErrorLog('TagSelector expects you to provide key prop value with getKey or Item.value!');\n    return '';\n  };\n  const autocompleteOptions = filterOutSelectedOptions(options, values, getKey);\n  const renderLabel = item => {\n    const displayValue = getDisplayValue(item);\n    const handleItemDelete = () => handleDelete(item);\n    if (customRenderLabel) {\n      return customRenderLabel({\n        disabled,\n        item,\n        displayValue,\n        onDelete: handleItemDelete\n      });\n    }\n    return React.createElement(TagSelectorLabel, {\n      disabled: disabled,\n      onDelete: handleItemDelete\n    }, displayValue);\n  };\n  const renderTags = values.map(item => React.createElement(Fragment, {\n    key: getKey(item)\n  }, renderLabel(item)));\n  return React.createElement(Autocomplete, Object.assign({}, rest, {\n    status: error ? 'error' : status,\n    ref: ref,\n    placeholder: values.length === 0 ? placeholder : undefined,\n    options: autocompleteOptions,\n    value: inputValue,\n    onSelect: handleSelect,\n    onOtherOptionSelect: handleOtherOptionSelect,\n    onChange: onInputChange,\n    onKeyDown: handleKeyDown,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    startAdornment: renderTags,\n    loading: loading,\n    disabled: disabled,\n    inputComponent: TagSelectorInput,\n    width: width,\n    showOtherOption: showOtherOption,\n    otherOptionText: otherOptionLabel,\n    noOptionsText: noOptionsText,\n    enableAutofill: enableAutofill,\n    getDisplayValue: getDisplayValue,\n    renderOption: renderOption,\n    enableReset: false,\n    getKey: getKey,\n    popperContainer: popperContainer,\n    popperOptions: popperOptions,\n    testIds: testIds\n  }));\n});\nTagSelector.defaultProps = {\n  enableAutofill: false,\n  getDisplayValue: getItemText,\n  loading: false,\n  onChange: noop,\n  closeOnSelect: true,\n  onInputChange: noop,\n  onOtherOptionSelect: noop,\n  options: [],\n  otherOptionLabel: 'Add new option: ',\n  noOptionsText: 'No matches found',\n  placeholder: '',\n  showOtherOption: false,\n  status: 'default'\n};\nTagSelector.displayName = 'TagSelector';\nexport default TagSelector;","map":{"version":3,"names":["React","forwardRef","Fragment","Autocomplete","TagSelectorInput","TagSelectorLabel","unsafeErrorLog","noop","usePropDeprecationWarning","EMPTY_INPUT_VALUE","filterOutSelectedOptions","options","values","getKey","arguments","length","undefined","item","value","valuesKeySet","reduce","acc","add","Set","filter","option","has","getItemText","text","TagSelector","props","ref","disabled","enableAutofill","getDisplayValue","customGetKey","inputValue","loading","noOptionsText","onBlur","onChange","onFocus","onInputChange","onOtherOptionSelect","otherOptionLabel","placeholder","renderLabel","customRenderLabel","renderOption","showOtherOption","width","popperContainer","popperOptions","error","status","testIds","rest","__rest","name","componentName","description","handleDelete","index","indexOf","slice","handleKeyDown","event","newInputValue","hasSelection","isDeleting","key","handleSelect","autocompleteItem","handleOtherOptionSelect","autocompleteOptions","displayValue","handleItemDelete","onDelete","createElement","renderTags","map","Object","assign","onSelect","onKeyDown","startAdornment","inputComponent","otherOptionText","enableReset","defaultProps","closeOnSelect","displayName"],"sources":["../../src/TagSelector/TagSelector.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}