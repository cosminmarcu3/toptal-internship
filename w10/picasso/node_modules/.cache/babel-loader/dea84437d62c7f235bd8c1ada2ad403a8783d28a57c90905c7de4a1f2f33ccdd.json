{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MenuItem from '../MenuItem';\nimport NonNativeSelectOption from '../NonNativeSelectOption';\nimport SelectOptions from '../SelectOptions';\nimport { flattenOptions, isOptionsType } from '../SelectBase';\nimport Typography from '../Typography';\nimport styles from './styles';\nconst useStyles = makeStyles(styles);\nconst MenuGroup = props => {\n  const {\n      group,\n      children\n    } = props,\n    rest = __rest(props, [\"group\", \"children\"]);\n  const classes = useStyles();\n  return React.createElement(React.Fragment, null, React.createElement(MenuItem, Object.assign({\n    role: 'option',\n    titleCase: false,\n    nonSelectable: true,\n    className: classes.menuGroup\n  }, rest), React.createElement(Typography, {\n    size: 'xsmall',\n    weight: 'semibold',\n    color: 'dark-grey'\n  }, group)), children);\n};\nconst renderOptions = _ref => {\n  let {\n    options,\n    getItemProps,\n    selection,\n    highlightedIndex,\n    offset = 0,\n    renderOption\n  } = _ref;\n  return options.map((option, index) => {\n    return React.createElement(NonNativeSelectOption, Object.assign({\n      key: option.key || option.value,\n      option: option,\n      selected: selection.isOptionSelected(option),\n      highlighted: highlightedIndex === index + offset,\n      description: option.description\n    }, getItemProps(option, index + offset)), renderOption === null || renderOption === void 0 ? void 0 : renderOption(option));\n  });\n};\nconst renderGroups = _ref2 => {\n  let {\n    groups,\n    getItemProps,\n    selection,\n    highlightedIndex,\n    renderOption\n  } = _ref2;\n  let optionsCount = 0;\n  return Object.keys(groups).map(group => {\n    const menuGroups = React.createElement(MenuGroup, {\n      key: group,\n      group: group\n    }, renderOptions({\n      options: groups[group],\n      getItemProps,\n      selection,\n      highlightedIndex,\n      offset: optionsCount,\n      renderOption\n    }));\n    optionsCount += groups[group].length;\n    return menuGroups;\n  });\n};\nconst addOffsetToHighlightedIndex = (groups, highlightedIndex) => {\n  if (!highlightedIndex) {\n    return highlightedIndex;\n  }\n  let optionsCount = 0;\n  const offset = Object.values(groups).findIndex(group => {\n    optionsCount += group.length;\n    const isHighlightedOptionInGroup = highlightedIndex < optionsCount;\n    return isHighlightedOptionInGroup;\n  }) + 1;\n  return highlightedIndex + offset;\n};\nconst NonNativeSelectOptions = _ref3 => {\n  let {\n    options,\n    renderOption = () => null,\n    highlightedIndex,\n    getItemProps,\n    onBlur,\n    selection,\n    filterOptionsValue,\n    noOptionsText,\n    fixedHeader,\n    fixedFooter,\n    testIds\n  } = _ref3;\n  const flatOptions = useMemo(() => flattenOptions(options), [options]);\n  if (!flatOptions.length && filterOptionsValue) {\n    return React.createElement(SelectOptions, {\n      \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.noOptions,\n      role: 'listbox',\n      fixedHeader: fixedHeader\n    }, React.createElement(MenuItem, {\n      titleCase: false,\n      disabled: true\n    }, noOptionsText));\n  }\n  return React.createElement(SelectOptions, {\n    fixedHeader: fixedHeader,\n    onBlur: onBlur,\n    selectedIndex: isOptionsType(options) ? highlightedIndex : addOffsetToHighlightedIndex(options, highlightedIndex),\n    fixedFooter: fixedFooter,\n    role: 'listbox'\n  }, isOptionsType(options) ? renderOptions({\n    options,\n    getItemProps,\n    selection,\n    highlightedIndex,\n    renderOption\n  }) : renderGroups({\n    groups: options,\n    getItemProps,\n    selection,\n    highlightedIndex,\n    renderOption\n  }));\n};\nNonNativeSelectOptions.displayName = 'NonNativeSelectOptions';\nexport default NonNativeSelectOptions;","map":{"version":3,"names":["React","useMemo","makeStyles","MenuItem","NonNativeSelectOption","SelectOptions","flattenOptions","isOptionsType","Typography","styles","useStyles","MenuGroup","props","group","children","rest","__rest","classes","createElement","Fragment","Object","assign","role","titleCase","nonSelectable","className","menuGroup","size","weight","color","renderOptions","_ref","options","getItemProps","selection","highlightedIndex","offset","renderOption","map","option","index","key","value","selected","isOptionSelected","highlighted","description","renderGroups","_ref2","groups","optionsCount","keys","menuGroups","length","addOffsetToHighlightedIndex","values","findIndex","isHighlightedOptionInGroup","NonNativeSelectOptions","_ref3","onBlur","filterOptionsValue","noOptionsText","fixedHeader","fixedFooter","testIds","flatOptions","noOptions","disabled","selectedIndex","displayName"],"sources":["../../src/NonNativeSelectOptions/NonNativeSelectOptions.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}