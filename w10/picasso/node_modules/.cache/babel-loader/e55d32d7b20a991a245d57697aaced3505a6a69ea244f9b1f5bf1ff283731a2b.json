{"ast":null,"code":"import { useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nconst useAvatarUpload = props => {\n  const {\n    accept,\n    minSize,\n    maxSize,\n    disabled,\n    uploading,\n    src,\n    validator,\n    onDrop,\n    onEdit,\n    onDropAccepted,\n    onDropRejected\n  } = props;\n  // callback overrides to return only one file to the parent component\n  const handleDrop = useCallback((acceptedFiles, fileRejections, event) => {\n    var _a, _b;\n    if (onDrop) {\n      onDrop((_a = acceptedFiles[0]) !== null && _a !== void 0 ? _a : null, (_b = fileRejections[0]) !== null && _b !== void 0 ? _b : null, event);\n    }\n  }, [onDrop]);\n  const handleDropAccepted = useCallback((files, event) => {\n    if (onDropAccepted) {\n      onDropAccepted(files[0], event);\n    }\n  }, [onDropAccepted]);\n  const handleDropRejected = useCallback((fileRejections, event) => {\n    if (onDropRejected) {\n      onDropRejected(fileRejections[0], event);\n    }\n  }, [onDropRejected]);\n  const handleEdit = event => {\n    // to avoid dropzone to be triggered\n    event.stopPropagation();\n    if (onEdit) {\n      onEdit(event);\n    }\n  };\n  const showAvatar = !uploading && Boolean(src);\n  const showUploadIcon = !uploading && !src;\n  // after showing avatar, only way to change the file selection is to use 'onEdit' by clicking\n  const disableDropzoneClick = showAvatar && !onEdit || uploading;\n  const disableKeyboardAndDragging = showAvatar || uploading;\n  const {\n    getInputProps,\n    getRootProps,\n    isDragActive,\n    isFocused,\n    rootRef\n  } = useDropzone({\n    accept,\n    minSize,\n    maxSize,\n    disabled,\n    multiple: false,\n    onDrop: handleDrop,\n    onDropAccepted: handleDropAccepted,\n    onDropRejected: handleDropRejected,\n    validator,\n    noClick: disableDropzoneClick,\n    noDrag: disableKeyboardAndDragging,\n    noKeyboard: disableKeyboardAndDragging\n  });\n  return {\n    rootRef,\n    showUploadIcon,\n    showAvatar,\n    isDropzoneDragActive: isDragActive,\n    isDropzoneFocused: isFocused,\n    getInputProps,\n    getRootProps,\n    handleEdit\n  };\n};\nexport default useAvatarUpload;","map":{"version":3,"names":["useCallback","useDropzone","useAvatarUpload","props","accept","minSize","maxSize","disabled","uploading","src","validator","onDrop","onEdit","onDropAccepted","onDropRejected","handleDrop","acceptedFiles","fileRejections","event","_a","_b","handleDropAccepted","files","handleDropRejected","handleEdit","stopPropagation","showAvatar","Boolean","showUploadIcon","disableDropzoneClick","disableKeyboardAndDragging","getInputProps","getRootProps","isDragActive","isFocused","rootRef","multiple","noClick","noDrag","noKeyboard","isDropzoneDragActive","isDropzoneFocused"],"sources":["../../../../src/AvatarUpload/hooks/use-avatar-upload/useAvatarUpload.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAA4BC,WAAW,QAAQ,gBAAgB;AA4D/D,MAAMC,eAAe,GAAIC,KAAY,IAAiB;EACpD,MAAM;IACJC,MAAM;IACNC,OAAO;IACPC,OAAO;IACPC,QAAQ;IACRC,SAAS;IACTC,GAAG;IACHC,SAAS;IACTC,MAAM;IACNC,MAAM;IACNC,cAAc;IACdC;EAAc,CACf,GAAGX,KAAK;EAET;EACA,MAAMY,UAAU,GAAGf,WAAW,CAC5B,CACEgB,aAAqB,EACrBC,cAA+B,EAC/BC,KAAgB,KACd;;IACF,IAAIP,MAAM,EAAE;MACVA,MAAM,CAAC,CAAAQ,EAAA,GAAAH,aAAa,CAAC,CAAC,CAAC,cAAAG,EAAA,cAAAA,EAAA,GAAI,IAAI,EAAE,CAAAC,EAAA,GAAAH,cAAc,CAAC,CAAC,CAAC,cAAAG,EAAA,cAAAA,EAAA,GAAI,IAAI,EAAEF,KAAK,CAAC;;EAEtE,CAAC,EACD,CAACP,MAAM,CAAC,CACT;EAED,MAAMU,kBAAkB,GAAGrB,WAAW,CACpC,CAACsB,KAAa,EAAEJ,KAAgB,KAAI;IAClC,IAAIL,cAAc,EAAE;MAClBA,cAAc,CAACS,KAAK,CAAC,CAAC,CAAC,EAAEJ,KAAK,CAAC;;EAEnC,CAAC,EACD,CAACL,cAAc,CAAC,CACjB;EAED,MAAMU,kBAAkB,GAAGvB,WAAW,CACpC,CAACiB,cAA+B,EAAEC,KAAgB,KAAI;IACpD,IAAIJ,cAAc,EAAE;MAClBA,cAAc,CAACG,cAAc,CAAC,CAAC,CAAC,EAAEC,KAAK,CAAC;;EAE5C,CAAC,EACD,CAACJ,cAAc,CAAC,CACjB;EAED,MAAMU,UAAU,GAAIN,KAAuB,IAAI;IAC7C;IACAA,KAAK,CAACO,eAAe,EAAE;IAEvB,IAAIb,MAAM,EAAE;MACVA,MAAM,CAACM,KAAK,CAAC;;EAEjB,CAAC;EAED,MAAMQ,UAAU,GAAG,CAAClB,SAAS,IAAImB,OAAO,CAAClB,GAAG,CAAC;EAC7C,MAAMmB,cAAc,GAAG,CAACpB,SAAS,IAAI,CAACC,GAAG;EAEzC;EACA,MAAMoB,oBAAoB,GAAIH,UAAU,IAAI,CAACd,MAAM,IAAKJ,SAAS;EACjE,MAAMsB,0BAA0B,GAAGJ,UAAU,IAAIlB,SAAS;EAE1D,MAAM;IAAEuB,aAAa;IAAEC,YAAY;IAAEC,YAAY;IAAEC,SAAS;IAAEC;EAAO,CAAE,GACrElC,WAAW,CAAC;IACVG,MAAM;IACNC,OAAO;IACPC,OAAO;IACPC,QAAQ;IACR6B,QAAQ,EAAE,KAAK;IACfzB,MAAM,EAAEI,UAAU;IAClBF,cAAc,EAAEQ,kBAAkB;IAClCP,cAAc,EAAES,kBAAkB;IAClCb,SAAS;IACT2B,OAAO,EAAER,oBAAoB;IAC7BS,MAAM,EAAER,0BAA0B;IAClCS,UAAU,EAAET;GACb,CAAC;EAEJ,OAAO;IACLK,OAAO;IACPP,cAAc;IACdF,UAAU;IACVc,oBAAoB,EAAEP,YAAY;IAClCQ,iBAAiB,EAAEP,SAAS;IAC5BH,aAAa;IACbC,YAAY;IACZR;GACD;AACH,CAAC;AAED,eAAetB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}