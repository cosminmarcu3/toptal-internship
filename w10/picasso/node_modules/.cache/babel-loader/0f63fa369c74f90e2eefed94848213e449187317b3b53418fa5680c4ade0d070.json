{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { forwardRef } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '../Container';\nimport Typography from '../Typography';\nimport { ModalCompound as Modal } from '../ModalCompound';\nimport Button from '../Button';\nimport styles from './styles';\nimport { noop, useSafeState } from '../utils';\nconst useStyles = makeStyles(styles, {\n  name: 'PicassoPromptModal'\n});\nexport const PromptModal = forwardRef(function PromptModal(props, ref) {\n  const {\n      children,\n      title,\n      message,\n      variant,\n      submitText,\n      cancelText,\n      onSubmit,\n      onAfterSubmit = noop,\n      onCancel = noop,\n      onClose,\n      testIds\n    } = props,\n    rest = __rest(props, [\"children\", \"title\", \"message\", \"variant\", \"submitText\", \"cancelText\", \"onSubmit\", \"onAfterSubmit\", \"onCancel\", \"onClose\", \"testIds\"]);\n  const classes = useStyles();\n  const [result, setResult] = useSafeState();\n  const [loading, setLoading] = useSafeState(false);\n  const [error, setError] = useSafeState(false);\n  const handleSubmit = () => __awaiter(this, void 0, void 0, function* () {\n    try {\n      setLoading(true);\n      setError(false);\n      yield onSubmit(result);\n      setLoading(false);\n      handleOnAfterSubmit();\n    } catch (err) {\n      setError(true);\n      setLoading(false);\n    }\n  });\n  const handleOnAfterSubmit = () => {\n    onAfterSubmit();\n    handleClose();\n  };\n  const handleCancel = () => {\n    onCancel();\n    handleClose();\n  };\n  const handleClose = () => {\n    setResult(undefined);\n    if (onClose) {\n      onClose();\n    }\n  };\n  return React.createElement(Modal, Object.assign({\n    ref: ref,\n    onClose: onClose && handleClose,\n    classes: classes\n  }, rest), title && React.createElement(Modal.Title, {\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.title\n  }, title), React.createElement(Modal.Content, null, React.createElement(Typography, {\n    size: 'medium',\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.message\n  }, message), children && React.createElement(Container, {\n    top: 'xsmall'\n  }, children({\n    setResult,\n    result,\n    setLoading,\n    loading,\n    setError,\n    error\n  }))), React.createElement(Modal.Actions, null, React.createElement(Button, {\n    disabled: loading,\n    variant: 'secondary',\n    onClick: handleCancel,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.closeButton\n  }, cancelText), React.createElement(Button, {\n    loading: loading,\n    onClick: handleSubmit,\n    variant: `${variant}`,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.submitButton\n  }, submitText)));\n});\nPromptModal.defaultProps = {\n  cancelText: 'Cancel',\n  onCancel: noop,\n  size: 'small',\n  submitText: 'Submit',\n  variant: 'positive',\n  onAfterSubmit: noop\n};\nPromptModal.displayName = 'PromptModal';\nexport default PromptModal;","map":{"version":3,"names":["React","forwardRef","makeStyles","Container","Typography","ModalCompound","Modal","Button","styles","noop","useSafeState","useStyles","name","PromptModal","props","ref","children","title","message","variant","submitText","cancelText","onSubmit","onAfterSubmit","onCancel","onClose","testIds","rest","__rest","classes","result","setResult","loading","setLoading","error","setError","handleSubmit","__awaiter","handleOnAfterSubmit","err","handleClose","handleCancel","undefined","createElement","Object","assign","Title","Content","size","top","Actions","disabled","onClick","closeButton","submitButton","defaultProps","displayName"],"sources":["../../src/PromptModal/PromptModal.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}