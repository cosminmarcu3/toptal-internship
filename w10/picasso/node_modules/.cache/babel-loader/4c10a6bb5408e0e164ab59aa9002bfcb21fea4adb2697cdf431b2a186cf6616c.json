{"ast":null,"code":"import { useCallback, useEffect, useMemo } from 'react';\nimport { CUSTOM_QUILL_EDITOR_FORMAT_EVENT, INSERT_DEFAULT_LINK_TEXT } from '../../constants';\nimport getFormatChangeHandler from '../../utils/getFormatChangeHandler';\nconst useSubscribeToTextEditorEvents = _ref => {\n  let {\n    editorRef,\n    quill\n  } = _ref;\n  const formatChangeHandler = useMemo(() => {\n    if (!quill) {\n      return () => {};\n    }\n    return getFormatChangeHandler(quill);\n  }, [quill]);\n  const insertDefaultLinkText = useCallback(_ref2 => {\n    let {\n      detail\n    } = _ref2;\n    var _a;\n    if (!quill) {\n      return;\n    }\n    const {\n      link\n    } = detail;\n    const selection = (_a = quill.getSelection(true)) !== null && _a !== void 0 ? _a : {\n      index: 0,\n      length: 0\n    };\n    if (selection.length === 0) {\n      quill.insertText(selection.index, link);\n      quill.setSelection(quill.getLength() - 1 - link.length, quill.getLength());\n    }\n  }, [quill]);\n  useEffect(() => {\n    const editor = editorRef.current;\n    if (!editor) {\n      return;\n    }\n    editor.addEventListener(CUSTOM_QUILL_EDITOR_FORMAT_EVENT, formatChangeHandler, false);\n    editor.addEventListener(INSERT_DEFAULT_LINK_TEXT, insertDefaultLinkText, false);\n    return () => {\n      editor === null || editor === void 0 ? void 0 : editor.removeEventListener(CUSTOM_QUILL_EDITOR_FORMAT_EVENT, formatChangeHandler, false);\n      editor === null || editor === void 0 ? void 0 : editor.removeEventListener(INSERT_DEFAULT_LINK_TEXT, insertDefaultLinkText, false);\n    };\n  }, [editorRef, formatChangeHandler, insertDefaultLinkText]);\n};\nexport default useSubscribeToTextEditorEvents;","map":{"version":3,"names":["useCallback","useEffect","useMemo","CUSTOM_QUILL_EDITOR_FORMAT_EVENT","INSERT_DEFAULT_LINK_TEXT","getFormatChangeHandler","useSubscribeToTextEditorEvents","_ref","editorRef","quill","formatChangeHandler","insertDefaultLinkText","_ref2","detail","link","selection","_a","getSelection","index","length","insertText","setSelection","getLength","editor","current","addEventListener","removeEventListener"],"sources":["../../../../src/QuillEditor/hooks/useSubscribeToTextEditorEvents/useSubscribeToTextEditorEvents.tsx"],"sourcesContent":[null],"mappings":"AAAA,SAASA,WAAW,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAGvD,SACEC,gCAAgC,EAChCC,wBAAwB,QACnB,iBAAiB;AACxB,OAAOC,sBAAsB,MAAM,oCAAoC;AAEvE,MAAMC,8BAA8B,GAAGC,IAAA,IAMlC;EAAA,IANmC;IACtCC,SAAS;IACTC;EAAK,CAIN,GAAAF,IAAA;EACC,MAAMG,mBAAmB,GAAGR,OAAO,CAAC,MAAK;IACvC,IAAI,CAACO,KAAK,EAAE;MACV,OAAO,MAAK,CAAE,CAAC;;IAGjB,OAAOJ,sBAAsB,CAACI,KAAK,CAAkB;EACvD,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,MAAME,qBAAqB,GAAGX,WAAW,CACvCY,KAAA,IAAe;IAAA,IAAd;MAAEC;IAAM,CAAE,GAAAD,KAAA;;IACT,IAAI,CAACH,KAAK,EAAE;MACV;;IAGF,MAAM;MAAEK;IAAI,CAAE,GAAGD,MAAM;IAEvB,MAAME,SAAS,GAAG,CAAAC,EAAA,GAAAP,KAAK,CAACQ,YAAY,CAAC,IAAI,CAAC,cAAAD,EAAA,cAAAA,EAAA,GAAI;MAAEE,KAAK,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAC,CAAE;IAErE,IAAIJ,SAAS,CAACI,MAAM,KAAK,CAAC,EAAE;MAC1BV,KAAK,CAACW,UAAU,CAACL,SAAS,CAACG,KAAK,EAAEJ,IAAI,CAAC;MACvCL,KAAK,CAACY,YAAY,CAChBZ,KAAK,CAACa,SAAS,EAAE,GAAG,CAAC,GAAGR,IAAI,CAACK,MAAM,EACnCV,KAAK,CAACa,SAAS,EAAE,CAClB;;EAEL,CAAC,EACD,CAACb,KAAK,CAAC,CACR;EAEDR,SAAS,CAAC,MAAK;IACb,MAAMsB,MAAM,GAAGf,SAAS,CAACgB,OAAO;IAEhC,IAAI,CAACD,MAAM,EAAE;MACX;;IAGFA,MAAM,CAACE,gBAAgB,CACrBtB,gCAAgC,EAChCO,mBAAmB,EACnB,KAAK,CACN;IAEDa,MAAM,CAACE,gBAAgB,CACrBrB,wBAAwB,EACxBO,qBAAqB,EACrB,KAAK,CACN;IAED,OAAO,MAAK;MACVY,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,mBAAmB,CACzBvB,gCAAgC,EAChCO,mBAAmB,EACnB,KAAK,CACN;MACDa,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,mBAAmB,CACzBtB,wBAAwB,EACxBO,qBAAqB,EACrB,KAAK,CACN;IACH,CAAC;EACH,CAAC,EAAE,CAACH,SAAS,EAAEE,mBAAmB,EAAEC,qBAAqB,CAAC,CAAC;AAC7D,CAAC;AAED,eAAeL,8BAA8B"},"metadata":{},"sourceType":"module","externalDependencies":[]}