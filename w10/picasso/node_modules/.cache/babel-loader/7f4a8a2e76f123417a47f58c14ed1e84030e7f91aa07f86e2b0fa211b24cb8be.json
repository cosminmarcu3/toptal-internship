{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React, { forwardRef, useMemo, useCallback, useState } from 'react';\nimport cx from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Truncate from 'react-truncate';\nimport ChevronRightIcon16 from '../Icon/ChevronRight16';\nimport Typography from '../Typography';\nimport styles from './styles';\nimport ButtonAction from '../ButtonAction';\nimport { replaceLineBreaksWithTags } from './utils';\nconst useStyles = makeStyles(styles, {\n  name: 'PicassoShowMore'\n});\nexport const ShowMore = forwardRef(function ShowMore(props, ref) {\n  const {\n      children,\n      rows = 4,\n      initialExpanded = false,\n      disableToggle = false,\n      moreText = 'Show more',\n      lessText = 'Show less',\n      onToggle = () => {},\n      className,\n      style,\n      testIds\n    } = props,\n    rest = __rest(props, [\"children\", \"rows\", \"initialExpanded\", \"disableToggle\", \"moreText\", \"lessText\", \"onToggle\", \"className\", \"style\", \"testIds\"]);\n  const classes = useStyles();\n  const [shownMore, setShownMore] = useState(initialExpanded);\n  const [needsTruncation, setNeedsTruncation] = useState(true);\n  const content = useMemo(() => typeof children === 'string' ? replaceLineBreaksWithTags(children) : children, [children]);\n  const handleNeedsTruncation = useCallback(truncated => setNeedsTruncation(truncated), [setNeedsTruncation]);\n  const isContentVisible = rows !== 0 || shownMore;\n  const formattedContent = shownMore ? content : React.createElement(Truncate, {\n    onTruncate: handleNeedsTruncation,\n    lines: rows\n  }, content);\n  return React.createElement(React.Fragment, null, React.createElement(Typography, Object.assign({}, rest, {\n    ref: ref,\n    size: 'medium',\n    color: 'dark-grey',\n    className: className,\n    style: style,\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.contentWrapper\n  }), isContentVisible && formattedContent), !disableToggle && needsTruncation && React.createElement(ButtonAction, {\n    onClick: () => {\n      const nextState = !shownMore;\n      setShownMore(nextState);\n      onToggle(nextState);\n    },\n    className: classes.toggleText,\n    icon: React.createElement(\"div\", {\n      className: classes.iconWrapper\n    }, React.createElement(ChevronRightIcon16, {\n      className: cx(classes.icon, {\n        [classes.expandedIcon]: shownMore\n      })\n    })),\n    iconPosition: 'right',\n    \"data-testid\": testIds === null || testIds === void 0 ? void 0 : testIds.toggleButton\n  }, shownMore ? lessText : moreText));\n});\nShowMore.displayName = 'ShowMore';\nexport default ShowMore;","map":{"version":3,"names":["React","forwardRef","useMemo","useCallback","useState","cx","makeStyles","Truncate","ChevronRightIcon16","Typography","styles","ButtonAction","replaceLineBreaksWithTags","useStyles","name","ShowMore","props","ref","children","rows","initialExpanded","disableToggle","moreText","lessText","onToggle","className","style","testIds","rest","__rest","classes","shownMore","setShownMore","needsTruncation","setNeedsTruncation","content","handleNeedsTruncation","truncated","isContentVisible","formattedContent","createElement","onTruncate","lines","Fragment","Object","assign","size","color","contentWrapper","onClick","nextState","toggleText","icon","iconWrapper","expandedIcon","iconPosition","toggleButton","displayName"],"sources":["../../src/ShowMore/ShowMore.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}