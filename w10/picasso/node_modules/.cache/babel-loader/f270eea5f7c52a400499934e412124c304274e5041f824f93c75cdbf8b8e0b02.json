{"ast":null,"code":"import { useEffect, useMemo, useState } from 'react';\nimport { zoom as d3zoom, select, zoomIdentity } from 'd3';\nexport const useZoom = _ref => {\n  let {\n    rootRef,\n    scaleExtent,\n    center,\n    initialScale = 1,\n    transitionDuration\n  } = _ref;\n  const [initialized, setInitialized] = useState(false);\n  const zoom = useMemo(() => d3zoom().scaleExtent(scaleExtent), [scaleExtent]);\n  const handleZoom = step => {\n    if (!rootRef.current) {\n      return;\n    }\n    select(rootRef.current).transition().call(zoom.scaleBy, step);\n  };\n  useEffect(() => {\n    if (!rootRef.current) {\n      return;\n    }\n    const transformContainer = select(rootRef.current.firstElementChild);\n    zoom.on('zoom', event => {\n      transformContainer.attr('transform', event.transform);\n    });\n    if (!initialized) {\n      select(rootRef.current).call(zoom).call(zoom.transform, zoomIdentity.scale(initialScale));\n      if (center) {\n        select(rootRef.current).call(zoom.translateTo, center.x, center.y);\n      }\n      setInitialized(true);\n    } else if (center) {\n      select(rootRef.current).transition().duration(transitionDuration).call(zoom.translateTo, center.x, center.y);\n    }\n  }, [zoom, initialized, center, rootRef, initialScale, transitionDuration]);\n  return {\n    zoom,\n    handleZoom\n  };\n};","map":{"version":3,"names":["useEffect","useMemo","useState","zoom","d3zoom","select","zoomIdentity","useZoom","_ref","rootRef","scaleExtent","center","initialScale","transitionDuration","initialized","setInitialized","handleZoom","step","current","transition","call","scaleBy","transformContainer","firstElementChild","on","event","attr","transform","scale","translateTo","x","y","duration"],"sources":["../../src/TreeView/useZoom.ts"],"sourcesContent":[null],"mappings":"AACA,SAAoBA,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC/D,SAASC,IAAI,IAAIC,MAAM,EAAEC,MAAM,EAAEC,YAAY,QAAQ,IAAI;AAiBzD,OAAO,MAAMC,OAAO,GAAGC,IAAA,IAMiD;EAAA,IANF;IACpEC,OAAO;IACPC,WAAW;IACXC,MAAM;IACNC,YAAY,GAAG,CAAC;IAChBC;EAAkB,CACe,GAAAL,IAAA;EACjC,MAAM,CAACM,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAMC,IAAI,GAAGF,OAAO,CAClB,MAAMG,MAAM,EAA2B,CAACM,WAAW,CAACA,WAAW,CAAC,EAChE,CAACA,WAAW,CAAC,CACd;EAED,MAAMM,UAAU,GAAIC,IAAY,IAAI;IAClC,IAAI,CAACR,OAAO,CAACS,OAAO,EAAE;MACpB;;IAGFb,MAAM,CAACI,OAAO,CAACS,OAAO,CAAC,CAACC,UAAU,EAAE,CAACC,IAAI,CAACjB,IAAI,CAACkB,OAAO,EAAEJ,IAAI,CAAC;EAC/D,CAAC;EAEDjB,SAAS,CAAC,MAAK;IACb,IAAI,CAACS,OAAO,CAACS,OAAO,EAAE;MACpB;;IAGF,MAAMI,kBAAkB,GAAGjB,MAAM,CAACI,OAAO,CAACS,OAAO,CAACK,iBAAiB,CAAC;IAEpEpB,IAAI,CAACqB,EAAE,CAAC,MAAM,EAAGC,KAAU,IAAI;MAC7BH,kBAAkB,CAACI,IAAI,CAAC,WAAW,EAAED,KAAK,CAACE,SAAS,CAAC;IACvD,CAAC,CAAC;IAEF,IAAI,CAACb,WAAW,EAAE;MAChBT,MAAM,CAACI,OAAO,CAACS,OAAO,CAAC,CACpBE,IAAI,CAACjB,IAAI,CAAC,CACViB,IAAI,CAACjB,IAAI,CAACwB,SAAS,EAAErB,YAAY,CAACsB,KAAK,CAAChB,YAAY,CAAC,CAAC;MAEzD,IAAID,MAAM,EAAE;QACVN,MAAM,CAACI,OAAO,CAACS,OAAO,CAAC,CAACE,IAAI,CAACjB,IAAI,CAAC0B,WAAW,EAAElB,MAAM,CAACmB,CAAC,EAAEnB,MAAM,CAACoB,CAAC,CAAC;;MAGpEhB,cAAc,CAAC,IAAI,CAAC;KACrB,MAAM,IAAIJ,MAAM,EAAE;MACjBN,MAAM,CAACI,OAAO,CAACS,OAAO,CAAC,CACpBC,UAAU,EAAE,CACZa,QAAQ,CAACnB,kBAAkB,CAAC,CAC5BO,IAAI,CAACjB,IAAI,CAAC0B,WAAW,EAAElB,MAAM,CAACmB,CAAC,EAAEnB,MAAM,CAACoB,CAAC,CAAC;;EAEjD,CAAC,EAAE,CAAC5B,IAAI,EAAEW,WAAW,EAAEH,MAAM,EAAEF,OAAO,EAAEG,YAAY,EAAEC,kBAAkB,CAAC,CAAC;EAE1E,OAAO;IACLV,IAAI;IACJa;GACD;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}